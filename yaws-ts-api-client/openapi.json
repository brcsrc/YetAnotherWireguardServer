{"openapi":"3.0.1","info":{"title":"OpenAPI definition","version":"v0"},"servers":[{"url":"http://localhost:8080","description":"Generated server url"}],"paths":{"/api/v1/user/whoami":{"post":{"tags":["user-controller"],"summary":"whoami","description":"returns the username of the logged in user if their token is valid","operationId":"whoami","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/WhoamiResponse"}}}}}}},"/api/v1/user/register":{"post":{"tags":["user-controller"],"summary":"Create Admin User","description":"creates an admin user if one does not exist","operationId":"createAdminUser","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/User"}}}}}}},"/api/v1/user/logout":{"post":{"tags":["user-controller"],"summary":"logout","description":"clears the authentication token cookie","operationId":"logout","responses":{"200":{"description":"OK"}}}},"/api/v1/user/authenticate":{"post":{"tags":["user-controller"],"summary":"Authenticate user and get token","description":"attempts to authenticate a user and returns an encoded JWT","operationId":"authenticateAndIssueToken","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}},"required":true},"responses":{"204":{"description":"Authenticated, no content returned"}}}},"/api/v1/networks":{"post":{"tags":["network-controller"],"summary":"Create Network","description":"create a network","operationId":"createNetwork","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Network"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Network"}}}}}}},"/api/v1/networks/list":{"post":{"tags":["network-controller"],"summary":"List Networks","description":"list all networks with pagination","operationId":"listNetworks","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ListNetworksRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ListNetworksResponse"}}}}}}},"/api/v1/clients":{"post":{"tags":["network-client-controller"],"summary":"Create Network Client","description":"create a client for a specific network","operationId":"createNetworkClient","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateNetworkClientRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/NetworkClient"}}}}}}},"/api/v1/clients/list":{"post":{"tags":["network-client-controller"],"summary":"List Network Clients","description":"list clients for a specific network with pagination","operationId":"listNetworkClients","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ListNetworkClientsRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ListNetworkClientsResponse"}}}}}}},"/api/v1/networks/{networkName}":{"get":{"tags":["network-controller"],"summary":"Describe Network","description":"describe a network","operationId":"describeNetwork","parameters":[{"name":"networkName","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Network"}}}}}},"delete":{"tags":["network-controller"],"summary":"Delete Network","description":"delete a network","operationId":"DeleteNetwork","parameters":[{"name":"networkName","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Network"}}}}}},"patch":{"tags":["network-controller"],"summary":"Update Network","description":"update the tag or status of a network","operationId":"updateNetwork","parameters":[{"name":"networkName","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateNetworkRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Network"}}}}}}},"/api/v1/tools/public-ip":{"get":{"tags":["tool-controller"],"summary":"Get Public IP","description":"get the server's public IP address","operationId":"getPublicIp","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/GetPublicIpResponse"}}}}}}},"/api/v1/clients/{networkName}/{clientName}":{"get":{"tags":["network-client-controller"],"summary":"Describe Network Clients","description":"describe a specific client for a specific network","operationId":"describeNetworkClient","parameters":[{"name":"networkName","in":"path","required":true,"schema":{"type":"string"}},{"name":"clientName","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/NetworkClient"}}}}}},"delete":{"tags":["network-client-controller"],"summary":"Delete Network Client","description":"delete a specific client for a network","operationId":"deleteNetworkClient","parameters":[{"name":"networkName","in":"path","required":true,"schema":{"type":"string"}},{"name":"clientName","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/NetworkClient"}}}}}}},"/api/v1/clients/{networkName}/{clientName}/config":{"get":{"tags":["network-client-controller"],"summary":"Get Network Client Configuration File","description":"get a networkclient configuration .conf file for a client on a given network to be downloadable","operationId":"getNetworkClientConfigFile","parameters":[{"name":"networkName","in":"path","required":true,"schema":{"type":"string"}},{"name":"clientName","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string","format":"binary"}}}}}}},"/api/v1/clients/{networkName}/next-ip":{"get":{"tags":["network-client-controller"],"summary":"Get Next Available Client Address","description":"get the next available IP address for a client on a given network","operationId":"getNextAvailableClientAddress","parameters":[{"name":"networkName","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/GetNextAvailableClientAddressResponse"}}}}}}}},"components":{"schemas":{"WhoamiResponse":{"type":"object","properties":{"user":{"type":"string"}}},"User":{"type":"object","properties":{"userName":{"pattern":"^[a-zA-Z0-9_-]{4,32}$","type":"string"},"password":{"type":"string"}}},"Network":{"required":["networkCidr","networkListenPort","networkName"],"type":"object","properties":{"networkName":{"pattern":"^[a-zA-Z0-9_-]{4,64}$","type":"string","description":"unique, alphanumeric, 1-64 character name for the network"},"networkCidr":{"pattern":"^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])(\\/(3[0-2]|[1-2][0-9]|[0-9]))$","type":"string","description":"CIDR block for the network"},"networkListenPort":{"maximum":65535,"minimum":1025,"type":"integer","description":"server listen port for the network","format":"int32"},"networkPrivateKeyName":{"type":"string"},"networkPublicKeyName":{"type":"string"},"networkTag":{"type":"string"},"networkStatus":{"type":"string","enum":["CREATED","ACTIVE","INACTIVE","DELETED"]}}},"ListNetworksRequest":{"type":"object","properties":{"page":{"minimum":0,"type":"integer","format":"int32"},"maxItems":{"maximum":10,"minimum":1,"type":"integer","format":"int32"}}},"ListNetworksResponse":{"type":"object","properties":{"networks":{"type":"array","items":{"$ref":"#/components/schemas/Network"}},"nextPage":{"type":"integer","format":"int32"}}},"CreateNetworkClientRequest":{"required":["clientName","networkName"],"type":"object","properties":{"clientName":{"type":"string"},"clientCidr":{"pattern":"^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])(\\/(3[0-2]|[1-2][0-9]|[0-9]))$","type":"string"},"clientDns":{"pattern":"^((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\\.){3}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])$","type":"string"},"allowedIps":{"type":"string"},"networkName":{"type":"string"},"networkEndpoint":{"pattern":"^((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\\.){3}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])$","type":"string"},"clientTag":{"type":"string"}}},"Client":{"type":"object","properties":{"clientName":{"type":"string"},"clientPrivateKeyName":{"type":"string"},"clientPublicKeyName":{"type":"string"},"clientCidr":{"type":"string"},"clientDns":{"type":"string"},"allowedIps":{"type":"string"},"networkPublicKeyName":{"type":"string"},"networkEndpoint":{"type":"string"},"networkListenPort":{"type":"integer","format":"int32"},"clientTag":{"type":"string"}}},"NetworkClient":{"type":"object","properties":{"networkClientId":{"type":"integer","format":"int64"},"network":{"$ref":"#/components/schemas/Network"},"client":{"$ref":"#/components/schemas/Client"}}},"ListNetworkClientsRequest":{"required":["networkName"],"type":"object","properties":{"networkName":{"type":"string"},"page":{"minimum":0,"type":"integer","format":"int32"},"maxItems":{"maximum":10,"minimum":1,"type":"integer","format":"int32"}}},"ListNetworkClientsResponse":{"type":"object","properties":{"clients":{"type":"array","items":{"$ref":"#/components/schemas/Client"}},"nextPage":{"type":"integer","format":"int32"}}},"UpdateNetworkRequest":{"type":"object","properties":{"networkTag":{"type":"string"},"networkStatus":{"type":"string","enum":["CREATED","ACTIVE","INACTIVE","DELETED"]}}},"GetPublicIpResponse":{"type":"object","properties":{"publicIp":{"type":"string"}}},"GetNextAvailableClientAddressResponse":{"type":"object","properties":{"nextAvailableAddress":{"type":"string"}}}}}}